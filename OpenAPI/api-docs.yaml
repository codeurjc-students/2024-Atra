openapi: 3.0.1
info:
  title: OpenAPI definition
  version: v0
servers:
- url: http://localhost:8080
  description: Generated server url
tags:
- name: Users
  description: User management endpoints
- name: Activities
  description: Activity management endpoints
- name: Murals
  description: Mural management endpoints
- name: Routes
  description: Route management endpoints
paths:
  /api/murals/{id}/thumbnail:
    get:
      tags:
      - Murals
      summary: Get mural thumbnail
      description: Retrieve the thumbnail image of a mural
      operationId: getThumbnail
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: string
                  format: byte
        "200":
          description: Thumbnail retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: string
                  format: byte
    put:
      tags:
      - Murals
      summary: Update mural thumbnail
      description: Replace the mural's thumbnail image
      operationId: changeThumbnail
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - file
              type: object
              properties:
                file:
                  type: string
                  description: Image file
                  format: binary
      responses:
        "400":
          description: Invalid image format
          content:
            '*/*':
              schema:
                type: string
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: string
        "204":
          description: Thumbnail updated successfully
          content:
            '*/*':
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: string
  /api/murals/{id}/banner:
    get:
      tags:
      - Murals
      summary: Get mural banner
      description: Retrieve the banner image of a mural
      operationId: getBanner
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: string
                  format: byte
        "200":
          description: Banner retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: string
                  format: byte
    put:
      tags:
      - Murals
      summary: Update mural banner
      description: Replace the mural's banner image
      operationId: changeBanner
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - file
              type: object
              properties:
                file:
                  type: string
                  description: Image file
                  format: binary
      responses:
        "204":
          description: Banner updated successfully
          content:
            '*/*':
              schema:
                type: string
        "400":
          description: Invalid image format
          content:
            '*/*':
              schema:
                type: string
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: string
  /api/users:
    post:
      tags:
      - Users
      summary: Create new user
      description: Create a new user account
      operationId: createUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewUserDTO"
        required: true
      responses:
        "200":
          description: User created successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Invalid user data
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/User"
    delete:
      tags:
      - Users
      summary: Delete current user
      description: Delete the authenticated user's account
      operationId: deleteCurrentlyAuthenticatedUser
      responses:
        "401":
          description: Unauthorized - authentication required
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/User"
        "204":
          description: User deleted successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/User"
  /api/users/verify-password:
    post:
      tags:
      - Users
      summary: Verify password
      description: Verify if the provided password matches the authenticated user's
        password
      operationId: verifyPassword
      requestBody:
        content:
          application/json:
            schema:
              type: string
        required: true
      responses:
        "200":
          description: Password verification result returned
          content:
            '*/*':
              schema:
                type: boolean
        "401":
          description: Unauthorized - authentication required
          content:
            '*/*':
              schema:
                type: boolean
  /api/users/password:
    post:
      tags:
      - Users
      summary: Change password
      description: Change the authenticated user's password
      operationId: changePassword
      requestBody:
        content:
          application/json:
            schema:
              type: string
        required: true
      responses:
        "401":
          description: Unauthorized - authentication required
          content:
            '*/*':
              schema:
                type: string
        "204":
          description: Password changed successfully
          content:
            '*/*':
              schema:
                type: string
  /api/routes:
    get:
      tags:
      - Routes
      summary: Get all routes
      description: "Retrieve routes with optional filtering by type, visibility, and\
        \ source"
      operationId: getAllRoutes
      parameters:
      - name: type
        in: query
        description: "Type of routes: noActivities, withActivities"
        required: false
        schema:
          type: string
      - name: from
        in: query
        description: "Filter by source (user, mural, etc)"
        required: false
        schema:
          type: string
      - name: id
        in: query
        description: Filter by source ID
        required: false
        schema:
          type: integer
          format: int64
      - name: visibility
        in: query
        description: "Filter by visibility: PUBLIC, PRIVATE, MURAL_PUBLIC, MURAL_SPECIFIC"
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Routes retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteDtoInterface"
        "400":
          description: Invalid visibility type
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteDtoInterface"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteDtoInterface"
    post:
      tags:
      - Routes
      summary: Create new route
      description: Create a new route from an existing activity. Pass the activity
        ID in the route object's id field; it will be cleared and the route will be
        persisted with a new ID
      operationId: createRoute
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Route"
        required: true
      responses:
        "200":
          description: Route created successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/RouteWithActivityDTO"
        "404":
          description: Activity not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/RouteWithActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/RouteWithActivityDTO"
  /api/routes/{routeId}/activities/:
    post:
      tags:
      - Routes
      summary: Add activities to route
      description: Add multiple activities to a route
      operationId: addActivitiesToRoute
      parameters:
      - name: routeId
        in: path
        description: Route ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: integer
                format: int64
        required: true
      responses:
        "404":
          description: Route not found
          content:
            '*/*':
              schema:
                type: boolean
        "204":
          description: Activities added successfully
          content:
            '*/*':
              schema:
                type: boolean
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: boolean
  /api/murals:
    get:
      tags:
      - Murals
      summary: Get murals
      description: Retrieve murals of a specific type
      operationId: getMurals
      parameters:
      - name: type
        in: query
        description: Type of murals to retrieve
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Murals retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MuralDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MuralDTO"
    post:
      tags:
      - Murals
      summary: Create new mural
      description: Create a new mural with thumbnail and banner images
      operationId: createMural
      parameters:
      - name: name
        in: query
        description: Mural name
        required: true
        schema:
          type: string
      - name: description
        in: query
        description: Mural description
        required: true
        schema:
          type: string
      - name: visibility
        in: query
        description: "Visibility type: PUBLIC or PRIVATE"
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - banner
              - thumbnail
              type: object
              properties:
                thumbnail:
                  type: string
                  description: Thumbnail image file
                  format: binary
                banner:
                  type: string
                  description: Banner image file
                  format: binary
      responses:
        "200":
          description: Mural created successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "400":
          description: Invalid image format or visibility
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
  /api/murals/{muralId}/users/{userId}/unban:
    post:
      tags:
      - Murals
      summary: Unban user from mural
      description: Remove a ban for a user from a mural
      operationId: unbanUser
      parameters:
      - name: muralId
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      - name: userId
        in: path
        description: User ID to unban
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: User unbanned successfully
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "404":
          description: Mural or user not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "403":
          description: Forbidden - insufficient permissions
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
  /api/murals/{muralId}/users/{userId}/ban:
    post:
      tags:
      - Murals
      summary: Ban user from mural
      description: Ban a user from a mural
      operationId: banUser
      parameters:
      - name: muralId
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      - name: userId
        in: path
        description: User ID to ban
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural or user not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "403":
          description: Forbidden - insufficient permissions
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "200":
          description: User banned successfully
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
  /api/murals/join:
    post:
      tags:
      - Murals
      summary: Join mural
      description: Join a mural using a code or mural ID
      operationId: joinMural
      requestBody:
        content:
          application/json:
            schema:
              type: string
        required: true
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: integer
                format: int32
        "200":
          description: Successfully joined mural
          content:
            '*/*':
              schema:
                type: integer
                format: int32
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: integer
                format: int32
  /api/auth/refresh:
    post:
      tags:
      - login-controller
      summary: Generate new Access token
      description: Generate and return a new Access token if the provided Refresh
        token is valid
      operationId: refreshToken
      parameters:
      - name: refreshToken
        in: cookie
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Token refreshed successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AuthResponse"
  /api/auth/logout:
    post:
      tags:
      - login-controller
      summary: User logout
      description: Logs out the user and clears the tokens.
      operationId: logOut
      responses:
        "200":
          description: Logout successful
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AuthResponse"
  /api/auth/login:
    post:
      tags:
      - login-controller
      summary: User login
      description: Authenticates a user with username and password.
      operationId: login
      parameters:
      - name: accessToken
        in: cookie
        required: false
        schema:
          type: string
      - name: refreshToken
        in: cookie
        required: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
        required: true
      responses:
        "200":
          description: Authentication successful
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AuthResponse"
  /api/activities:
    get:
      tags:
      - Activities
      summary: Get activities with pagination
      description: Retrieve activities with optional filtering and pagination
      operationId: getActivitiesPaged
      parameters:
      - name: fetchAll
        in: query
        description: Fetch all activities without pagination
        required: true
        schema:
          type: boolean
      - name: from
        in: query
        description: "Filter by source (user, mural, etc)"
        required: false
        schema:
          type: string
      - name: id
        in: query
        description: Filter by source ID
        required: false
        schema:
          type: integer
          format: int64
      - name: startPage
        in: query
        description: Starting page number
        required: false
        schema:
          type: integer
          format: int32
          default: 0
      - name: pagesToFetch
        in: query
        description: Number of pages to fetch
        required: false
        schema:
          type: integer
          format: int32
          default: 1
      - name: pageSize
        in: query
        description: Number of entries per page
        required: false
        schema:
          type: integer
          format: int32
      - name: cond
        in: query
        description: Filter condition
        required: false
        schema:
          type: string
      - name: visibility
        in: query
        description: Filter by visibility
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Activities retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
    post:
      tags:
      - Activities
      summary: Create new activity
      description: Create a new activity from an uploaded GPX file
      operationId: createActivity
      requestBody:
        content:
          application/json:
            schema:
              required:
              - file
              type: object
              properties:
                file:
                  type: string
                  description: GPX file to upload
                  format: binary
      responses:
        "200":
          description: Activity created successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "400":
          description: Invalid file format
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
  /api/activities/{activityId}/route:
    post:
      tags:
      - Activities
      summary: Add route to activity
      description: Associate a route with an activity
      operationId: addRoute
      parameters:
      - name: activityId
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: integer
              format: int64
        required: true
      responses:
        "200":
          description: Route added successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "404":
          description: Activity or route not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
  /api/users/{id}:
    get:
      tags:
      - Users
      summary: Get user by ID
      description: Retrieve a user's information by their ID
      operationId: getUser
      parameters:
      - name: id
        in: path
        description: User ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: User found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
        "404":
          description: User not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
    patch:
      tags:
      - Users
      summary: Update user
      description: Partially update a user's information
      operationId: patchUser
      parameters:
      - name: id
        in: path
        description: User ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserDTO"
        required: true
      responses:
        "200":
          description: User updated successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
        "404":
          description: User not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
  /api/routes/{id}/visibility:
    patch:
      tags:
      - Routes
      summary: Change route visibility
      description: "Update the visibility settings of a route. Request body should\
        \ contain 'visibility' (PUBLIC, PRIVATE, MURAL_PUBLIC, MURAL_SPECIFIC) and\
        \ optionally 'allowedMuralsList' as a comma-separated string in brackets for\
        \ MURAL_SPECIFIC visibility"
      operationId: changeVisibility
      parameters:
      - name: id
        in: path
        description: Route ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
        required: true
      responses:
        "404":
          description: Route not found
          content:
            '*/*':
              schema:
                type: boolean
        "204":
          description: Visibility changed successfully
          content:
            '*/*':
              schema:
                type: boolean
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: boolean
  /api/routes/visibility/mural:
    patch:
      tags:
      - Routes
      summary: Hide routes from mural
      description: Make routes not visible to a specific mural
      operationId: makeRoutesNotVisibleToMural
      parameters:
      - name: id
        in: query
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: integer
                format: int64
        required: true
      responses:
        "204":
          description: Routes visibility updated
          content:
            '*/*':
              schema:
                type: string
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: string
  /api/murals/{id}:
    get:
      tags:
      - Murals
      summary: Get mural by ID
      description: Retrieve a mural's information by its ID
      operationId: getMural
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "200":
          description: Mural found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
    delete:
      tags:
      - Murals
      summary: Delete mural
      description: Delete a mural and all its contents
      operationId: deleteMural
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "403":
          description: Forbidden - only owner can delete
          content:
            '*/*':
              schema:
                type: string
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: string
        "204":
          description: Mural deleted successfully
          content:
            '*/*':
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: string
    patch:
      tags:
      - Murals
      summary: Edit mural
      description: Update mural information
      operationId: editMural
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MuralEditDTO"
        required: true
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "200":
          description: Mural updated successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "403":
          description: Forbidden - insufficient permissions
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/MuralDTO"
  /api/activities/{id}:
    get:
      tags:
      - Activities
      summary: Get activity by ID
      description: Retrieve an activity's information by its ID
      operationId: getActivity
      parameters:
      - name: id
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      - name: mural
        in: query
        description: Optional mural ID
        required: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: Activity found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "404":
          description: Activity not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
    delete:
      tags:
      - Activities
      summary: Delete activity
      description: Delete an activity by its ID
      operationId: deleteActivity
      parameters:
      - name: id
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: Activity deleted successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "404":
          description: Activity not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
    patch:
      tags:
      - Activities
      summary: Edit activity
      description: Update activity details
      operationId: editActivity
      parameters:
      - name: id
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ActivityEditDTO"
        required: true
      responses:
        "404":
          description: Activity not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "200":
          description: Activity updated successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
  /api/activities/{id}/visibility:
    patch:
      tags:
      - Activities
      summary: Change activity visibility
      description: "Update the visibility settings of an activity. Request body should\
        \ contain 'visibility' (PUBLIC, PRIVATE, MURAL_PUBLIC, MURAL_SPECIFIC) and\
        \ optionally 'allowedMuralsList' as a comma-separated string in brackets for\
        \ MURAL_SPECIFIC visibility"
      operationId: changeVisibility_1
      parameters:
      - name: id
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
        required: true
      responses:
        "404":
          description: Activity not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "200":
          description: Visibility changed successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
  /api/activities/visibility/mural:
    patch:
      tags:
      - Activities
      summary: Hide activities from mural
      description: Make selected activities not visible to a specific mural
      operationId: makeActivitiesNotVisibleToMural
      parameters:
      - name: id
        in: query
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: integer
                format: int64
        required: true
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: string
        "204":
          description: Activities visibility updated
          content:
            '*/*':
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: string
  /api/users/me:
    get:
      tags:
      - Users
      summary: Get current user
      description: Retrieve the authenticated user's information
      operationId: getCurrentUser
      responses:
        "401":
          description: Unauthorized - authentication required
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
        "200":
          description: Current user information retrieved
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/UserDTO"
  /api/users/IsUsernameTaken:
    get:
      tags:
      - Users
      summary: Check username availability
      description: Check if a username is already taken
      operationId: isUsernameTaken
      parameters:
      - name: username
        in: query
        description: Username to check
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Username availability checked
          content:
            '*/*':
              schema:
                type: boolean
  /api/routes/{id}:
    get:
      tags:
      - Routes
      summary: Get route by ID
      description: Retrieve a route's information by its ID
      operationId: getRoute
      parameters:
      - name: id
        in: path
        description: Route ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Route not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/RouteWithoutActivityDTO"
        "200":
          description: Route found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/RouteWithoutActivityDTO"
    delete:
      tags:
      - Routes
      summary: Delete route
      description: Delete a route by its ID
      operationId: deleteRoute
      parameters:
      - name: id
        in: path
        description: Route ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Route not found
          content:
            '*/*':
              schema:
                type: boolean
        "204":
          description: Route deleted successfully
          content:
            '*/*':
              schema:
                type: boolean
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: boolean
  /api/routes/{id}/activities:
    get:
      tags:
      - Routes
      summary: Get activities in route
      description: Retrieve all activities assigned to a specific route
      operationId: getActivitiesAssignedToRoute
      parameters:
      - name: id
        in: path
        description: Route ID
        required: true
        schema:
          type: integer
          format: int64
      - name: mural
        in: query
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Route not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityOfRouteDTO"
        "200":
          description: Activities retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityOfRouteDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityOfRouteDTO"
  /api/routes/OwnedInMural:
    get:
      tags:
      - Routes
      summary: Get owned routes in mural
      description: Retrieve routes owned by the current user in a specific mural
      operationId: getOwnedRoutesInMural
      parameters:
      - name: muralId
        in: query
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: Routes retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteWithoutActivityDTO"
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteWithoutActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RouteWithoutActivityDTO"
  /api/murals/{id}/isVisible:
    get:
      tags:
      - Murals
      summary: Check mural visibility
      description: Check if a mural is visible to the authenticated user
      operationId: isVisibleByAuthUser
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: boolean
        "200":
          description: Visibility status retrieved
          content:
            '*/*':
              schema:
                type: boolean
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: boolean
  /api/auth/IsLoggedIn:
    get:
      tags:
      - login-controller
      operationId: isLoggedIn
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: boolean
  /api/activities/byIds:
    get:
      tags:
      - Activities
      summary: Get multiple activities by IDs
      description: Retrieve multiple activities by their IDs. Returns only activities
        the user has access to; check ATRA-requested-forbidden header to see if any
        requested activities were filtered
      operationId: getActivitiesByIds
      parameters:
      - name: ids
        in: query
        description: List of activity IDs
        required: true
        schema:
          type: array
          items:
            type: integer
            format: int64
      - name: muralId
        in: query
        description: Optional mural ID
        required: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: Activities retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
  /api/activities/OwnedInMural:
    get:
      tags:
      - Activities
      summary: Get owned activities in mural
      description: Retrieve activities owned by the current user in a specific mural
      operationId: getOwnedActivitiesInMural
      parameters:
      - name: muralId
        in: query
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
        "200":
          description: Activities retrieved
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ActivityDTO"
  /api/routes/{routeId}/activities/{activityId}:
    delete:
      tags:
      - Routes
      summary: Remove activity from route
      description: Remove an activity from a route
      operationId: removeActivityFromRoute
      parameters:
      - name: routeId
        in: path
        description: Route ID
        required: true
        schema:
          type: integer
          format: int64
      - name: activityId
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Route or activity not found
          content:
            '*/*':
              schema:
                type: boolean
        "204":
          description: Activity removed successfully
          content:
            '*/*':
              schema:
                type: boolean
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: boolean
  /api/murals/{muralId}/users/{userId}:
    delete:
      tags:
      - Murals
      summary: Remove user from mural
      description: Remove a specified user from a mural
      operationId: removeSpecifiedUserFromMural
      parameters:
      - name: muralId
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      - name: userId
        in: path
        description: User ID to remove
        required: true
        schema:
          type: integer
          format: int64
      - name: inheritor
        in: query
        description: New owner ID if current owner is leaving
        required: false
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural or user not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "200":
          description: User removed from mural
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "403":
          description: Forbidden - insufficient permissions
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
  /api/murals/{id}/users/me:
    delete:
      tags:
      - Murals
      summary: Leave mural
      description: Remove the current user from a mural
      operationId: removeCurrentUserFromMural
      parameters:
      - name: id
        in: path
        description: Mural ID
        required: true
        schema:
          type: integer
          format: int64
      - name: inheritor
        in: query
        description: New owner ID if current owner is leaving
        required: false
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Mural not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "200":
          description: User removed from mural
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NamedId"
  /api/activities/{id}/route:
    delete:
      tags:
      - Activities
      summary: Remove route from activity
      description: Remove an associated route from an activity
      operationId: removeRoute
      parameters:
      - name: id
        in: path
        description: Activity ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "404":
          description: Activity not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "200":
          description: Route removed successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ActivityDTO"
components:
  schemas:
    NewUserDTO:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
        name:
          type: string
        email:
          type: string
    Mural:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        code:
          type: string
        visibility:
          type: string
          enum:
          - PRIVATE
          - MURAL_SPECIFIC
          - MURAL_PUBLIC
          - PUBLIC
        owner:
          $ref: "#/components/schemas/User"
        members:
          type: array
          items:
            $ref: "#/components/schemas/User"
        bannedUsers:
          type: array
          items:
            $ref: "#/components/schemas/User"
        thumbnail:
          type: array
          items:
            type: string
            format: byte
        banner:
          type: array
          items:
            type: string
            format: byte
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
        username:
          type: string
        password:
          type: string
        name:
          type: string
        email:
          type: string
        memberMurals:
          type: array
          items:
            $ref: "#/components/schemas/Mural"
        roles:
          type: array
          items:
            type: string
        admin:
          type: boolean
    Coordinates:
      type: object
      properties:
        lat:
          type: number
          format: double
        lon:
          type: number
          format: double
    Route:
      type: object
      properties:
        id:
          type: integer
          format: int64
        totalDistance:
          type: number
          format: double
        elevationGain:
          type: number
          format: double
        coordinates:
          type: array
          items:
            $ref: "#/components/schemas/Coordinates"
        name:
          type: string
        description:
          type: string
        visibility:
          $ref: "#/components/schemas/Visibility"
        createdBy:
          $ref: "#/components/schemas/User"
      description: The route object must hold the target activity ID in its id field.
    Visibility:
      type: object
      properties:
        type:
          type: string
          enum:
          - PRIVATE
          - MURAL_SPECIFIC
          - MURAL_PUBLIC
          - PUBLIC
        allowedMurals:
          type: array
          items:
            type: integer
            format: int64
        public:
          type: boolean
        private:
          type: boolean
        allowedMuralsNonNull:
          type: array
          items:
            type: integer
            format: int64
        muralSpecific:
          type: boolean
        muralPublic:
          type: boolean
    ActivityOfRouteDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        user:
          type: integer
          format: int64
        summary:
          $ref: "#/components/schemas/ActivitySummary"
    ActivitySummary:
      type: object
      properties:
        id:
          type: integer
          format: int64
        startTime:
          type: string
          format: date-time
        totalDistance:
          type: number
          format: double
        totalTime:
          type: integer
          format: int64
        elevationGain:
          type: number
          format: double
        averages:
          type: object
          additionalProperties:
            type: number
            format: double
        records:
          type: object
          additionalProperties:
            type: string
        upRecords:
          type: object
          additionalProperties:
            type: string
          writeOnly: true
        upAverages:
          type: object
          additionalProperties:
            type: number
            format: double
          writeOnly: true
    RouteWithActivityDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        totalDistance:
          type: number
          format: double
        elevationGain:
          type: number
          format: double
        visibility:
          $ref: "#/components/schemas/Visibility"
        coordinates:
          type: array
          items:
            $ref: "#/components/schemas/Coordinates"
        name:
          type: string
        description:
          type: string
        activities:
          type: array
          items:
            $ref: "#/components/schemas/ActivityOfRouteDTO"
        createdBy:
          type: integer
          format: int64
    MuralDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        code:
          type: string
        visibility:
          type: string
        thumbnailUrl:
          type: string
        bannerUrl:
          type: string
        owner:
          $ref: "#/components/schemas/NamedId"
        members:
          type: array
          items:
            $ref: "#/components/schemas/NamedId"
        bannedUsers:
          type: array
          items:
            $ref: "#/components/schemas/NamedId"
        activities:
          type: array
          items:
            $ref: "#/components/schemas/NamedId"
        routes:
          type: array
          items:
            $ref: "#/components/schemas/NamedId"
    NamedId:
      type: object
      properties:
        name:
          type: string
        id:
          type: integer
          format: int64
    AuthResponse:
      type: object
      properties:
        status:
          type: string
          enum:
          - SUCCESS
          - FAILURE
        message:
          type: string
        error:
          type: string
    LoginRequest:
      type: object
      properties:
        username:
          type: string
        password:
          type: string
    ActivityDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        type:
          type: string
        startTime:
          type: string
          format: date-time
        user:
          $ref: "#/components/schemas/NamedId"
        route:
          $ref: "#/components/schemas/NamedId"
        dataPoints:
          type: array
          items:
            $ref: "#/components/schemas/DataPoint"
        streams:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        summary:
          $ref: "#/components/schemas/ActivitySummary"
        visibility:
          type: string
          enum:
          - PRIVATE
          - MURAL_SPECIFIC
          - MURAL_PUBLIC
          - PUBLIC
        allowedMurals:
          type: array
          items:
            type: integer
            format: int64
    DataPoint:
      type: object
      properties:
        time:
          type: string
          format: date-time
        lat:
          type: number
          format: double
        lon:
          type: number
          format: double
        ele:
          type: number
          format: double
        hr:
          type: integer
          format: int32
        cad:
          type: integer
          format: int32
        other:
          type: object
          additionalProperties:
            type: string
    UserDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        username:
          type: string
        name:
          type: string
        email:
          type: string
        roles:
          type: array
          items:
            type: string
    MuralEditDTO:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        newOwner:
          type: integer
          format: int64
    ActivityEditDTO:
      type: object
      properties:
        name:
          type: string
        type:
          type: string
    RouteDtoInterface:
      type: object
    RouteWithoutActivityDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
        totalDistance:
          type: number
          format: double
        elevationGain:
          type: number
          format: double
        visibility:
          $ref: "#/components/schemas/Visibility"
        coordinates:
          type: array
          items:
            $ref: "#/components/schemas/Coordinates"
        name:
          type: string
        description:
          type: string
        createdBy:
          type: integer
          format: int64
